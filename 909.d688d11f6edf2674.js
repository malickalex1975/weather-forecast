"use strict";(self.webpackChunkweather_forecast=self.webpackChunkweather_forecast||[]).push([[909],{909:(S,v,c)=>{c.r(v),c.d(v,{CameraGameModule:()=>Z});var C=c(6895),T=c(9197),x=c(5861),_=c(1135),t=c(4650),U=c(6074),f=c(4006),O=c(1572);function D(R,i){if(1&R){const s=t.EpF();t.TgZ(0,"div",39),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.resetAll())}),t._uU(1," reset all "),t.qZA()}}function G(R,i){1&R&&(t.TgZ(0,"p"),t._uU(1,"No video"),t.qZA())}function k(R,i){1&R&&(t.TgZ(0,"div",40),t._UZ(1,"mat-spinner",41),t.qZA())}const{MyClass:q}=c(3290);class b{constructor(i){this.themeService=i,this.maxError1=0,this.maxError2=0,this.timerStart=0,this.timerStop=0,this.scanX=0,this.scanY=0,this.matching=0,this.sameArr=[],this.contrastLevel=122,this.contrastDelta=0,this.pointTitleColor="#eee",this.averageTitleColor="#eee",this.inputColor="",this.inputDelta=10,this.isBigCanvas=!1,this.dataArray=[],this.isResetHidden=!0,this.accuracy=100,this.errorsQuantity=10,this.timeStart=0,this.timeStop=0,this.averageR=0,this.averageG=0,this.averageB=0,this.averageA=1,this.monoAverage=0,this.colR=0,this.colB=0,this.colG=0,this.filterR=0,this.filterG=0,this.filterB=0,this.progress=new _.X(0),this.pointR="-",this.pointG="-",this.pointB="-",this.pointA="-",this.pointColor="rgba(0,0,0,1)",this.isSaveButton=!1,this.dataUrl="",this.x="-",this.y="-",this.isMouseDown=!1,this.isContrast=!1,this.canvasWidth=640,this.canvasHeight=480,this.theme$$=this.themeService.getTheme(),this.myclass=new q,this.userRectX=0,this.userRectY=0,this.userRectWidth=50,this.userRectHeight=50,this.deltaPointX=0,this.deltaPointY=0,this.deltaWidth=0,this.deltaHeight=0,this.ctx2=null,this.ctx3=null,this.doScreenshot=()=>{},this.isStopFind=!1,this.frameWidth=3,this.isLoading=!1,this.streamStarted=!1,this.resetAll=()=>{this.colR=0,this.colB=0,this.colG=0,this.filterR=0,this.filterG=0,this.filterB=0,this.inputDelta=10,this.inputColor="",this.accuracy=100,this.errorsQuantity=10,this.useFilter(this.applyFilter),this.isResetHidden=!0,this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}}ngOnInit(){var i=this;const s=document.querySelector(".display-cover");this.averageColor$$=new _.X("rgba(0,0,0,1)"),document.querySelector(".controls");const n=document.querySelector(".video-options>select"),a=document.querySelector("video"),o=document.querySelector(".canvas");this.toggleFullscreen(o);const r=document.querySelector(".canvas-2");r.width=640,r.height=480,this.scanX=r.getBoundingClientRect().x,this.scanY=r.getBoundingClientRect().y,this.scanElement=document.createElement("div"),this.scanElement.className="scan-element",s.appendChild(this.scanElement),this.ctx2=r.getContext("2d",{willReadFrequently:!0});const d=document.querySelector(".canvas-3");d.width=this.userRectWidth-2*this.frameWidth,d.height=this.userRectHeight-2*this.frameWidth,this.ctx3=d.getContext("2d",{willReadFrequently:!0}),r.addEventListener("mousedown",l=>{this.isMouseDown=!0;let u=r.getBoundingClientRect().x,g=r.getBoundingClientRect().y,m=Math.floor(l.clientX-u),W=Math.floor(l.clientY-g);this.userRectX=m-this.userRectWidth/2,this.userRectY=W-this.userRectHeight/2,this.z&&this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight),this.deltaPointX=m-this.userRectX,this.deltaPointY=W-this.userRectY}),document.addEventListener("mouseup",()=>this.isMouseDown=!1),r.addEventListener("mouseleave",()=>{this.x="-",this.y="-",this.pointR="-",this.pointG="-",this.pointB="-",this.pointA="-",this.pointColor="rgba(0,0,0,1)",this.pointTitleColor="#eee"}),r.addEventListener("mousemove",l=>{this.checkUserPointInRect(this.x,this.y)?r.setAttribute("style","cursor:grab"):r.setAttribute("style","cursor:auto")}),r.addEventListener("mousemove",l=>{this.isSaveButton=!0;let u=r.getBoundingClientRect().x,g=r.getBoundingClientRect().y;this.x=Math.floor(l.clientX-u),this.y=Math.floor(l.clientY-g),this.isMouseDown?this.checkUserPointInRect(this.x,this.y)?(this.userRectX=this.x-this.deltaPointX,this.userRectY=this.y-this.deltaPointY,this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)):this.drawCanvas(this.x,this.y):this.isMouseDown||this.definePoint(this.x,this.y)});const y=document.querySelectorAll(".btn"),[h,p,j]=[...y],A={video:!0};function w(){return(w=(0,x.Z)(function*(){const g=(yield navigator.mediaDevices.enumerateDevices()).filter(m=>"videoinput"===m.kind).map(m=>`<option value="${m.deviceId}">${m.label}</option>`);n.innerHTML=g.join("")})).apply(this,arguments)}h.onclick=(0,x.Z)(function*(){if(i.streamStarted)a.play();else if("mediaDevices"in navigator){const l={...A,deviceId:{exact:n.value}};P(l)}});const P=function(){var l=(0,x.Z)(function*(u){const g=yield navigator.mediaDevices.getUserMedia(u);Y(g)});return function(g){return l.apply(this,arguments)}}(),Y=l=>{a.srcObject=l,this.streamStarted=!0,this.isSaveButton=!1};n.onchange=()=>{const l={...A,deviceId:{exact:n.value}};P(l)},this.doScreenshot=()=>{if(this.clearCanvas(),this.streamStarted){o.width=a.videoWidth,o.height=a.videoHeight,this.canvasWidth=a.videoWidth,this.canvasHeight=a.videoHeight,o.getContext("2d").drawImage(a,0,0);let u=o.getContext("2d")?.getImageData(0,0,this.canvasWidth,this.canvasHeight);this.createAverageColor(u),this.z=new ImageData(this.applyFilter(u.data),this.canvasWidth,this.canvasHeight,{colorSpace:"srgb"}),r.width=this.canvasWidth,r.height=this.canvasHeight,this.ctx2?.putImageData(this.z,0,0),this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}},p.onclick=()=>{a.pause()},j.onclick=this.doScreenshot,function I(){w.apply(this,arguments)}()}createAverageColor(i){let s=Array.from(i.data),n=s.length/4,a=[],o=[],r=[],d=[];for(let h=0;h<n;h++)a.push(s[4*h+0]),o.push(s[4*h+1]),r.push(s[4*h+2]),d.push(s[4*h+3]);this.averageR=Math.round(a.reduce((h,p)=>h+p,0)/n),this.averageG=Math.round(o.reduce((h,p)=>h+p,0)/n),this.averageB=Math.round(r.reduce((h,p)=>h+p,0)/n),this.averageA=Number((Math.round(d.reduce((h,p)=>h+p,0)/n)/255).toFixed(2)),this.averageColor$$?.next(`rgba(${this.averageR},${this.averageG},${this.averageB},${this.averageA}`),this.averageTitleColor=(this.averageB+this.averageG+this.averageR)/3>150?"#000":"#eee",0===this.averageA&&(this.pointTitleColor="#f00")}createMonoImage(i){let s=0,e=i.length,n=e/4,a=new Uint8ClampedArray(e);for(let o=0;o<n;o++){let h=Math.round((i[4*o+0]+i[4*o+1]+i[4*o+2])/3);s+=h,a[4*o+0]=h,a[4*o+1]=h,a[4*o+2]=h,a[4*o+3]=i[4*o+3]}return this.monoAverage=Math.round(s/e),a}createContrastImage(i){let s=i.length,e=new Uint8ClampedArray(s);for(let n=0;n<s;n+=4){let o=i[n+1],r=i[n+2];e[n+0]=i[n+0]<this.contrastLevel?0+this.contrastDelta:255-this.contrastDelta,e[n+1]=o<this.contrastLevel?0+this.contrastDelta:255-this.contrastDelta,e[n+2]=r<this.contrastLevel?0+this.contrastDelta:255-this.contrastDelta,e[n+3]=i[n+3]}return e}createInverseImage(i){let s=i.length,e=s/4,n=new Uint8ClampedArray(s);for(let a=0;a<e;a++)n[4*a+0]=Math.abs(i[4*a+0]-255),n[4*a+1]=Math.abs(i[4*a+1]-255),n[4*a+2]=Math.abs(i[4*a+2]-255),n[4*a+3]=i[4*a+3];return n}applyFilter(i){if(0===this.colB&&0===this.colG&&0===this.colR)return i;let s=i.length,e=new Uint8ClampedArray(s);for(let n=0;n<s;n+=4){let a=i[n+0],o=i[n+1],r=i[n+2];a>=this.colR-this.inputDelta&&a<=this.colR+this.inputDelta&&o>=this.colG-this.inputDelta&&o<=this.colG+this.inputDelta&&r>=this.colB-this.inputDelta&&r<=this.colB+this.inputDelta?(e[n+0]=a,e[n+1]=o,e[n+2]=r):(e[n+0]=0,e[n+1]=0,e[n+2]=0),e[n+3]=i[n+3]}return e}applyMultyFilter(i){if(0===this.filterB&&0===this.filterG&&0===this.filterR)return i;let s=i.length,e=new Uint8ClampedArray(s);for(let n=0;n<s;n+=4){let o=i[n+1],r=i[n+2];e[n+0]=i[n+0]+this.filterR,e[n+1]=o+this.filterG,e[n+2]=r+this.filterB,e[n+3]=i[n+3]}return e}drawCanvas(i,s){if(!this.isMouseDown)return void this.ctx2?.beginPath();this.ctx2.strokeStyle="red",this.ctx2.lineTo(i,s),this.ctx2.stroke();let e=this.ctx2.getImageData(0,0,this.canvasWidth,this.canvasHeight);setTimeout(()=>this.createAverageColor(e),0)}clearCanvas(){this.isSaveButton=!1,this.ctx2.beginPath(),this.ctx2.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawCanvas(0,0)}getHref(){const i=document.querySelector(".canvas-2"),s=document.querySelector(".save-button");this.dataUrl=i.toDataURL("image/webp"),this.dataUrl&&(this.isSaveButton=!0,s.href=this.dataUrl)}definePoint(i,s){this.ctx2.beginPath();let e=this.ctx2.getImageData(i,s,1,1);this.pointR=e.data[0],this.pointG=e.data[1],this.pointB=e.data[2],this.pointA=Math.round(e.data[3]/255),this.pointColor=`rgba(${this.pointR},${this.pointG},${this.pointB},${this.pointA})`,this.pointTitleColor=(this.pointR+this.pointB+this.pointG)/3>150?"#000":"#eee",0===this.pointA&&(this.pointTitleColor="#f00")}toggleFullscreen(i){i.addEventListener("dblclick",()=>{document.fullscreenElement?document.exitFullscreen():i.requestFullscreen().catch(s=>console.log(s))})}convertToRGB(i){this.colR=parseInt(i.slice(1,3),16),this.colG=parseInt(i.slice(3,5),16),this.colB=parseInt(i.slice(5),16)}useFilter(i){const e=document.querySelector(".canvas"),n=document.querySelector(".canvas-2");let o=e.getContext("2d")?.getImageData(0,0,this.canvasWidth,this.canvasHeight),r=new ImageData(i.call(this,o.data),this.canvasWidth,this.canvasHeight,{colorSpace:"srgb"});n.width=this.canvasWidth,n.height=this.canvasHeight,this.ctx2.putImageData(r,0,0),this.createAverageColor(r)}checkFilters(){return 0===this.colR&&0===this.colB&&0===this.colG&&0===this.filterR&&0===this.filterG&&0===this.filterB&&10===this.inputDelta&&""===this.inputColor}detectFace(){const i=document.querySelector(".canvas-2");i?this.myclass.checkFD()&&this.myclass.detect(i).then(s=>this.drawRects(s)):console.log("no image to detect")}drawRects(i){for(const s of i){const e=s.boundingBox.x,n=s.boundingBox.y,a=s.boundingBox.width,o=s.boundingBox.height;this.ctx2.beginPath(),this.ctx2.strokeStyle="#0ff",this.ctx2.strokeRect(e,n,a,o)}}drawUserRect(i,s,e,n,a="red",o=!1,r=0){let d;d=this.isContrast?this.contrastImage:this.z,o||(this.ctx2?.putImageData(d,0,0),this.matching=0),this.ctx2.lineWidth=this.frameWidth,this.ctx2.strokeStyle=a,this.ctx2.strokeRect(i,s,e,n),0!==r&&(this.ctx2.font=.66*this.userRectWidth+"px serif ",this.ctx2.fillStyle="red",this.ctx2?.fillText(r.toString(),i+this.userRectWidth/10,s+.6*this.userRectWidth)),this.copyUserRect()}checkUserPointInRect(i,s){return"-"!==i&&"-"!==s&&i>=this.userRectX&&s>=this.userRectY&&i<=this.userRectX+this.userRectWidth&&s<=this.userRectY+this.userRectHeight}copyUserRect(){const i=document.querySelector(".canvas-3");i.width=this.userRectWidth-2*this.frameWidth,i.height=this.userRectHeight-2*this.frameWidth,this.copy=this.ctx2?.getImageData(this.userRectX+this.frameWidth,this.userRectY+this.frameWidth,this.userRectWidth-2*this.frameWidth,this.userRectHeight-2*this.frameWidth),this.ctx3?.putImageData(this.copy,0,0)}find(){this.timeStart=Date.now(),new Promise((s,e)=>{for(let n=0;n<this.canvasHeight;n++)for(let a=0;a<this.canvasWidth;a++){let o=this.ctx2?.getImageData(a-this.frameWidth,n-this.frameWidth,this.userRectWidth-2*this.frameWidth,this.userRectHeight-2*this.frameWidth);if(o&&this.compareFragment(o))return s({x:a,y:n})}return e("not found")}).then(s=>{this.drawUserRect(s.x-2*this.frameWidth,s.y-2*this.frameWidth,this.userRectWidth,this.userRectHeight,"green"),this.timeStop=Date.now(),console.log(((this.timeStop-this.timeStart)/1e3).toFixed(2),"sec.")}).catch(s=>console.log("something wrong in promise",s))}compareFragment(i){let s=i.data.length;for(let e=0;e<s;e++)if(i.data[e]!==this.copy.data[e])return!1;return!0}compareTheSame(i){let s=i.data.length,e=0,n=0;for(let a=0;a<s;a++)if(e+=Math.abs(i.data[a]-this.copy.data[a]),i.data[a]!==this.copy.data[a]&&n++,e>this.maxError1||n>this.maxError2)return!1;return!0}findTheSame(i=0){let s=!1;0===i&&(this.maxError1=4*(this.userRectHeight-2*this.frameWidth)*(this.userRectWidth-2*this.frameWidth)*this.errorsQuantity,this.maxError2=4*(this.userRectHeight-2*this.frameWidth)*(this.userRectWidth-2*this.frameWidth)*(1-this.accuracy/100),this.timeStart=Date.now(),this.isLoading=!0,this.w=this.isContrast?this.contrastImage:this.z,this.w&&this.sameArr.push({x:this.userRectX,y:this.userRectY}));for(let e=0;e<this.canvasWidth;e++){let n=this.ctx2?.getImageData(e+this.frameWidth,i+this.frameWidth,this.userRectWidth-2*this.frameWidth,this.userRectHeight-2*this.frameWidth);this.compareTheSame(n)&&(this.sameArr.some(a=>Math.abs(e-a.x)<this.userRectWidth&&Math.abs(i-a.y)<this.userRectHeight)||(s=!0,this.matching++,this.drawUserRect(e,i,this.userRectWidth,this.userRectHeight,"green",!0,this.matching),this.sameArr.push({x:e,y:i})))}i<this.canvasHeight?(i++,this.drawScanLine(i,s),setTimeout(()=>this.findTheSame(i),0)):(this.timeStop=Date.now(),console.log(((this.timeStop-this.timeStart)/1e3).toFixed(1),"sec."),this.isLoading=!1,setTimeout(()=>{0===this.matching?alert("Nothing found"):alert(`${this.matching} matches found`)},1e3))}loadFile(){let s=document.querySelector(".file-input")?.files?.[0],e=new Image(640,480);s&&(e.src=URL.createObjectURL(s)),e.onload=()=>{this.clearCanvas(),this.ctx2?.drawImage(e,0,0,e.width,e.height),this.z=this.ctx2?.getImageData(0,0,this.canvasWidth,this.canvasHeight),this.resetAll()}}decreaseFragment(){this.userRectWidth>20&&this.userRectWidth--,this.userRectHeight>20&&this.userRectHeight--,this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}increaseFragment(){this.userRectWidth<100&&this.userRectWidth++,this.userRectHeight<100&&this.userRectHeight++,this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}applyContrast(){if(this.isContrast){let i=this.z?.data;if(i){let s=this.createContrastImage(this.createMonoImage(i));this.contrastImage=new ImageData(s,this.canvasWidth,this.canvasHeight,{colorSpace:"srgb"}),this.ctx2?.putImageData(this.contrastImage,0,0),this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}}else this.ctx2?.putImageData(this.z,0,0),this.drawUserRect(this.userRectX,this.userRectY,this.userRectWidth,this.userRectHeight)}drawScanLine(i,s=!1){this.scanElement?.setAttribute("style",i===this.canvasHeight?`width:${this.canvasWidth}px;height:3px;background-color:green;position:fixed;top:${this.scanY}px;left:${this.scanX}px;transform:translateY(0px);transition:2s;`:`width:${this.canvasWidth}px;height:3px;background-color:${s?"green":"yellow"};position:fixed;top:${this.scanY}px;left:${this.scanX}px;transform:translateY(${i}px)`)}static#t=this.\u0275fac=function(s){return new(s||b)(t.Y36(U.f))};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-camera-game"]],decls:101,vars:60,consts:[[1,"display-cover"],[1,"input-container"],[1,"input-wrapper"],["type","range","max","255","min","0","value","0","step","1",1,"contrast-delta",3,"ngModel","ngModelChange"],["type","range","max","255","min","0","value","122","step","1",1,"input-delta",3,"ngModel","ngModelChange"],["type","range","max","100","min","0","value","100","step","1",1,"accuracy",3,"ngModel","ngModelChange"],["type","range","max","255","min","0","value","10","step","1",1,"errors",3,"ngModel","ngModelChange"],["type","file","accept","image/*",1,"file-input",3,"input"],[1,"filter-container"],[2,"color","red"],["type","range","max","255","min","-255","value","0","step","1",1,"input-delta",3,"ngModel","ngModelChange"],[2,"color","green"],[2,"color","blue"],["class","reset-button",3,"click",4,"ngIf"],[1,"user-adjusment"],[1,"fragment-decrease",3,"click"],[1,"fragment-value"],[1,"fragment-increase",3,"click"],[1,"video-wrapper"],["autoplay",""],[4,"ngIf"],["draggable","true",1,"canvas",3,"click"],[1,"canvas-2"],[1,"canvas-3"],[1,"video-options"],["name","","id","",1,"custom-select"],["value",""],["href","#",1,"save-button",3,"download","click"],[1,"average-color"],[1,"point-color"],[1,"point-data"],[1,"average-data"],[1,"controls"],["title","Play",1,"btn","btn-danger","play"],["title","Pause",1,"btn","btn-info","pause","d-none"],["title","ScreenShot",1,"btn","btn-outline-success","screenshot","d-none"],[3,"click"],["class","loading",4,"ngIf"],[1,"matching"],[1,"reset-button",3,"click"],[1,"loading"],["diameter","100","color","primary"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1)(3,"div",2)(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(a){return e.contrastDelta=a})("ngModelChange",function(){return e.isContrast=!0,e.applyContrast(),e.isResetHidden=!1}),t.qZA()(),t.TgZ(7,"div",2)(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"input",4),t.NdJ("ngModelChange",function(a){return e.contrastLevel=a})("ngModelChange",function(){return e.isContrast=!0,e.applyContrast(),e.isResetHidden=!1}),t.qZA()(),t.TgZ(11,"div",2)(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"input",5),t.NdJ("ngModelChange",function(a){return e.accuracy=a})("ngModelChange",function(){return e.isResetHidden=!1}),t.qZA()(),t.TgZ(15,"div",2)(16,"p"),t._uU(17),t.qZA(),t.TgZ(18,"input",6),t.NdJ("ngModelChange",function(a){return e.errorsQuantity=a})("ngModelChange",function(){return e.isResetHidden=!1}),t.qZA()(),t.TgZ(19,"div",2)(20,"p"),t._uU(21,"load file:"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("input",function(){return e.loadFile()}),t.qZA()()(),t.TgZ(23,"div",8)(24,"p",9),t._uU(25),t.qZA(),t.TgZ(26,"input",10),t.NdJ("ngModelChange",function(a){return e.filterR=a})("ngModelChange",function(){return e.useFilter(e.applyMultyFilter),e.isResetHidden=!1}),t.qZA(),t.TgZ(27,"p",11),t._uU(28),t.qZA(),t.TgZ(29,"input",10),t.NdJ("ngModelChange",function(a){return e.filterG=a})("ngModelChange",function(){return e.useFilter(e.applyMultyFilter),e.isResetHidden=!1}),t.qZA(),t.TgZ(30,"p",12),t._uU(31),t.qZA(),t.TgZ(32,"input",10),t.NdJ("ngModelChange",function(a){return e.filterB=a})("ngModelChange",function(){return e.useFilter(e.applyMultyFilter),e.isResetHidden=!1}),t.qZA()(),t.YNc(33,D,2,0,"div",13),t.TgZ(34,"div",14)(35,"div",15),t.NdJ("click",function(){return e.decreaseFragment()}),t._uU(36," - "),t.qZA(),t.TgZ(37,"p",16),t._uU(38),t.qZA(),t.TgZ(39,"div",17),t.NdJ("click",function(){return e.increaseFragment()}),t._uU(40," + "),t.qZA()(),t.TgZ(41,"div",18),t._UZ(42,"video",19),t.YNc(43,G,2,0,"p",20),t.qZA(),t.TgZ(44,"canvas",21),t.NdJ("click",function(){return e.isBigCanvas=!e.isBigCanvas}),t.qZA(),t._UZ(45,"canvas",22)(46,"canvas",23),t.TgZ(47,"div",24)(48,"select",25)(49,"option",26),t._uU(50,"Select camera"),t.qZA()()(),t.TgZ(51,"a",27),t.NdJ("click",function(){return e.getHref()}),t._uU(52,"Save"),t.qZA(),t.TgZ(53,"div",28),t.ALo(54,"async"),t._uU(55," Average colour "),t.qZA(),t.TgZ(56,"div",29),t._uU(57," Point colour "),t.qZA(),t.TgZ(58,"div",30)(59,"p"),t._uU(60),t.qZA(),t.TgZ(61,"p"),t._uU(62),t.qZA(),t.TgZ(63,"p"),t._uU(64),t.qZA(),t.TgZ(65,"p"),t._uU(66),t.qZA(),t.TgZ(67,"p"),t._uU(68),t.qZA(),t.TgZ(69,"p"),t._uU(70),t.qZA()(),t.TgZ(71,"div",31)(72,"p"),t._uU(73),t.qZA(),t.TgZ(74,"p"),t._uU(75),t.qZA(),t.TgZ(76,"p"),t._uU(77),t.qZA(),t.TgZ(78,"p"),t._uU(79),t.qZA()(),t.TgZ(80,"div",32)(81,"button",33)(82,"p"),t._uU(83,"play"),t.qZA()(),t.TgZ(84,"button",34),t._uU(85,"pause"),t.qZA(),t.TgZ(86,"button",35),t._uU(87," shot "),t.qZA(),t.TgZ(88,"button",36),t.NdJ("click",function(){return e.clearCanvas(),e.isContrast=!1}),t._uU(89,"clear"),t.qZA(),t.TgZ(90,"button",36),t.NdJ("click",function(){return e.detectFace()}),t._uU(91,"detect"),t.qZA(),t.TgZ(92,"button",36),t.NdJ("click",function(){return e.isContrast=!e.isContrast,e.applyContrast()}),t._uU(93," contr "),t.qZA(),t.TgZ(94,"button",36),t.NdJ("click",function(){return e.find(),e.isContrast=!1}),t._uU(95," find "),t.qZA(),t.TgZ(96,"button",36),t.NdJ("click",function(){return e.matching=0,e.sameArr=[],e.findTheSame()}),t._uU(97," same "),t.qZA()(),t.YNc(98,k,2,0,"div",37),t.TgZ(99,"div",38),t._uU(100),t.qZA()()),2&s&&(t.ekj("dark","dark"===t.lcZ(1,56,e.theme$$)),t.xp6(5),t.hij("contrast delta: ",e.contrastDelta,""),t.xp6(1),t.Q6J("ngModel",e.contrastDelta),t.xp6(3),t.hij("contrast level: ",e.contrastLevel,""),t.xp6(1),t.Q6J("ngModel",e.contrastLevel),t.xp6(3),t.hij("accuracy: ",e.accuracy," %"),t.xp6(1),t.Q6J("ngModel",e.accuracy),t.xp6(3),t.hij("error value: ",e.errorsQuantity,""),t.xp6(1),t.Q6J("ngModel",e.errorsQuantity),t.xp6(7),t.hij("filter R: ",e.filterR,""),t.xp6(1),t.Q6J("ngModel",e.filterR),t.xp6(2),t.hij("filter G: ",e.filterG,""),t.xp6(1),t.Q6J("ngModel",e.filterG),t.xp6(2),t.hij("filter B: ",e.filterB,""),t.xp6(1),t.Q6J("ngModel",e.filterB),t.xp6(1),t.Q6J("ngIf",!e.isResetHidden),t.xp6(2),t.ekj("adjustment-disable",e.userRectWidth<=20),t.xp6(3),t.Oqu(e.userRectWidth),t.xp6(1),t.ekj("adjustment-disable",e.userRectWidth>=100),t.xp6(4),t.Q6J("ngIf",!e.streamStarted),t.xp6(1),t.Udp("width",e.isBigCanvas?"40vw":"20vw"),t.xp6(7),t.ekj("visible",e.isSaveButton),t.Q6J("download","my_photo.png"),t.xp6(2),t.Udp("background-color",t.lcZ(54,58,e.averageColor$$))("color",e.averageTitleColor),t.xp6(3),t.Udp("background-color",e.pointColor)("color",e.pointTitleColor),t.xp6(4),t.hij("X= ",e.x,""),t.xp6(2),t.hij("Y= ",e.y,""),t.xp6(2),t.hij("R: ",e.pointR,""),t.xp6(2),t.hij("G: ",e.pointG,""),t.xp6(2),t.hij("B: ",e.pointB,""),t.xp6(2),t.hij("A: ",e.pointA,""),t.xp6(3),t.hij("R: ",e.averageR,""),t.xp6(2),t.hij("G: ",e.averageG,""),t.xp6(2),t.hij("B: ",e.averageB,""),t.xp6(2),t.hij("A: ",e.averageA,""),t.xp6(11),t.ekj("invisible",!e.z),t.xp6(2),t.ekj("invisible",!e.z),t.xp6(2),t.ekj("invisible",!e.z),t.xp6(2),t.ekj("invisible",!e.z),t.xp6(2),t.Q6J("ngIf",e.isLoading),t.xp6(2),t.Oqu(e.matching))},dependencies:[C.O5,f.YN,f.Kr,f.Fj,f.eT,f.JJ,f.On,O.Ou,C.Ov],styles:[".input-container[_ngcontent-%COMP%]{position:absolute;top:0;left:20px;display:flex;gap:20px;min-width:700px}.input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:160px;height:40px;padding:10px;border:2px dotted red}.input-color[_ngcontent-%COMP%]{width:30px;height:30px}.input-delta[_ngcontent-%COMP%]{width:100px}.filter-container[_ngcontent-%COMP%]{position:absolute;left:-140px;top:-20px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;width:200px;height:-moz-fit-content;height:fit-content;gap:5px}.canvas[_ngcontent-%COMP%]{position:fixed;right:0;bottom:50px;width:20vw;padding:0}.canvas-2[_ngcontent-%COMP%]{position:fixed;left:50px;bottom:70px;width:640px;height:480px;padding:0;border:2px solid rgb(236,36,36);background-color:#000}.canvas-3[_ngcontent-%COMP%]{position:fixed;left:700px;bottom:300px;padding:0;border:2px solid rgb(80,13,237)}.save-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-decoration:none;width:50px;height:30px;position:fixed;left:0;bottom:170px;opacity:0;visibility:hidden}.save-button[_ngcontent-%COMP%]:hover{background-color:#eee}.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.invisible[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.average-color[_ngcontent-%COMP%]{position:fixed;left:700px;bottom:50px;width:50px;height:50px;border:2px solid red;padding:30px}.point-color[_ngcontent-%COMP%]{position:fixed;left:700px;bottom:180px;width:50px;height:50px;border:2px solid green;padding:30px}.display-cover[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:70%;margin:2% auto;position:relative}.video-wrapper[_ngcontent-%COMP%]{position:relative;left:270px;width:320px;height:auto;top:70px;z-index:10}.video-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;left:70px;top:-120px;font-size:40px}video[_ngcontent-%COMP%]{position:relative;left:0;width:320px;top:0;background:rgba(0,0,0,.2)}.video-options[_ngcontent-%COMP%]{position:absolute;left:700px;top:-20px}.controls[_ngcontent-%COMP%]{position:fixed;right:40px;top:140px;display:flex;flex-direction:column;gap:5px;max-height:350px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){border:2px solid #d2002e}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){border:2px solid #008496}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){border:2px solid #00b541}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(4){border:2px solid #672052}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(5){border:2px solid #14fcbe}.controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:45px;height:45px;text-align:center;border-radius:100%;margin:6px;background:transparent;cursor:pointer}.controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:#c1eef4}.average-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100px;height:120px;border:1px dashed red;border-radius:5px;position:fixed;left:850px;bottom:50px}.point-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100px;height:120px;border:1px dashed green;border-radius:5px;position:fixed;left:850px;bottom:180px}.dark[_ngcontent-%COMP%]{color:#eee}.dark[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{color:#eee}.reset-button[_ngcontent-%COMP%]{position:absolute;top:70px;left:170px;min-width:120px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:red;font-size:20px;border-radius:5px}.reset-button[_ngcontent-%COMP%]:hover{background-color:#ccc}.reset-button[_ngcontent-%COMP%]:active{background-color:red;color:#eee}.reset-buttondisabled[_ngcontent-%COMP%]{cursor:auto;opacity:.3;color:#666}.file-input[_ngcontent-%COMP%]{width:140px}.user-adjusment[_ngcontent-%COMP%]{position:fixed;right:120px;bottom:280px;display:flex;align-items:center;justify-content:space-around;width:120px;height:60px;border:2px dotted blue;font-size:32px;color:#888}.fragment-increase[_ngcontent-%COMP%], .fragment-decrease[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;border-radius:50%;cursor:pointer}.fragment-increase[_ngcontent-%COMP%]:hover, .fragment-decrease[_ngcontent-%COMP%]:hover{background-color:#eee;color:#000}.fragment-increase[_ngcontent-%COMP%]:active, .fragment-decrease[_ngcontent-%COMP%]:active{background-color:#888;color:#fff}.adjustment-disable[_ngcontent-%COMP%]{color:#eee;cursor:auto}.adjustment-disable[_ngcontent-%COMP%]:hover, .adjustment-disable[_ngcontent-%COMP%]:active{background-color:transparent;color:#eee}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;bottom:50%;right:50%}.matching[_ngcontent-%COMP%]{width:70px;height:40px;border:2px solid red;position:fixed;top:140px;left:550px;color:red;font-size:40px;display:flex;align-items:center;justify-content:center}"]})}const B=[{path:"",component:b}];class M{static#t=this.\u0275fac=function(s){return new(s||M)};static#e=this.\u0275mod=t.oAB({type:M});static#i=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(B),T.Bz]})}var H=c(4466),F=c(3466);class Z{static#t=this.\u0275fac=function(s){return new(s||Z)};static#e=this.\u0275mod=t.oAB({type:Z});static#i=this.\u0275inj=t.cJS({imports:[C.ez,M,H.m,F.q]})}},3290:(S,v,c)=>{c.r(v),c.d(v,{MyClass:()=>C});class C{constructor(){}checkFD(){return"FaceDetector"in window?(alert("FaceDetector is supported"),!0):(alert("FaceDetector is not supported"),!1)}detect(x){try{return new FaceDetector({fastMode:!1,maxDetectedFaces:10}).detect(x)}catch(_){console.error("Face Detection failed, boo.",_)}}}}}]);